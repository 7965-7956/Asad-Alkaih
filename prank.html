<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ù‚Ù„Ø¨ ÙƒØ§Ù…ÙŠØ±Ø§ â€” Ø¶Ø­Ùƒ Ø¨Ø³</title>
  <style>
    html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:#111;color:#fff}
    .wrap{display:flex;flex-direction:column;height:100%;align-items:center;justify-content:center;padding:12px;box-sizing:border-box}
    video{max-width:100%;width:100%;height:auto;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.6)}
    .overlay{
      position:relative; max-width:100%; width:420px;
    }
    .badge{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:18px; background:rgba(0,0,0,0.6); padding:10px 14px; border-radius:999px;
      font-size:16px; backdrop-filter:blur(4px); color:#fff; text-align:center;
    }
    .controls{margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; justify-content:center}
    button{padding:10px 14px;border-radius:8px;border:none;background:#1f6feb;color:white;font-weight:600}
    button.secondary{background:#666}
    p.small{font-size:13px;color:#bbb;margin-top:8px;text-align:center;max-width:420px}
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Ø§ÙØªÙØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ®Ù„ÙŠÙ‡Ø§ Ø¶Ø­Ùƒ ğŸ˜„</h2>

    <div class="overlay" id="player">
      <video id="video" playsinline autoplay muted></video>
      <div class="badge" id="badge">ØªÙ… ØªØµÙˆÙŠØ±Ùƒ! Ø¥Ø±Ø³Ù„Ù‡Ø§ Ù„Ù„Ù€ CIA ğŸ˜‚</div>
    </div>

    <div class="controls">
      <button id="startBtn">Ø´ØºÙ‘Ù„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
      <button id="stopBtn" class="secondary">Ø·Ù„Ù‘Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
      <button id="switchText" class="secondary">ØºØ±ÙÙ‘Ø¨ Ø§Ù„Ù†Øµ</button>
    </div>

    <p class="small">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¨Ù‚Ù‰ Ø¹Ù†Ø¯ Ø¬Ù‡Ø§Ø² Ø§Ù„Ø´Ø®Øµ ÙÙ‚Ø· â€” **Ù…Ø§ ÙŠÙ†Ø±Ø³Ù„ ÙˆÙ„Ø§ ÙŠØ®Ø²Ù†**. Ù„Ø§Ø²Ù… ÙŠÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§.</p>
  </div>

  <script>
    const video = document.getElementById('video');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const badge = document.getElementById('badge');
    const switchText = document.getElementById('switchText');

    let stream = null;
    const texts = [
      "ØªÙ… ØªØµÙˆÙŠØ±Ùƒ! Ø¥Ø±Ø³Ù„Ù‡Ø§ Ù„Ù„Ù€ CIA ğŸ˜‚",
      "Ø§Ø¨ØªØ³Ù…! ØµÙˆØ±ØªÙƒ Ù…Ø³Ø±ÙˆÙ‚Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ ğŸ˜œ",
      "ÙƒØ´ÙÙ†Ø§ Ù…ÙˆÙ‚Ø¹Ùƒ: Ø§Ù„Ù…Ø·Ø¨Ø®ØŸ ğŸ•",
      "ÙˆØ§Ø§Ø§ÙŠ! Ø¥Ù†Øª Ù…Ø´Ù‡ÙˆØ± Ø§Ù„Ø¢Ù† ğŸ‰"
    ];
    let ti = 0;

    async function startCamera(){
      if (stream) return;
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: false });
        video.srcObject = stream;
        // Ø®Ø§ÙŠÙÙŠÙ† Ù…Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø¦ Ø¹Ù„Ù‰ Ù…ÙˆØ¨Ø§ÙŠÙ„
        await video.play();
      } catch (err){
        alert('Ù…Ø§ Ù‚Ø¯Ø±Ù†Ø§ Ù†Ø´ØºÙ‘Ù„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ â€” Ù„Ø§Ø²Ù… ØªÙˆØ§ÙÙ‚ ÙˆØ¥Ù„Ø§ Ø§Ù„Ù…Ø³ØªØ¹Ø±Ø¶ Ù…Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…ÙŠØ²Ø©.');
        console.error(err);
      }
    }

    function stopCamera(){
      if (!stream) return;
      stream.getTracks().forEach(t => t.stop());
      stream = null;
      video.srcObject = null;
    }

    startBtn.addEventListener('click', startCamera);
    stopBtn.addEventListener('click', stopCamera);

    // ØºÙŠÙ‘Ø± Ø§Ù„Ù†Øµ ÙƒÙ„ 2.5 Ø«Ø§Ù†ÙŠØ©
    setInterval(() => {
      ti = (ti + 1) % texts.length;
      badge.textContent = texts[ti];
    }, 2500);

    switchText.addEventListener('click', () => {
      ti = (ti + 1) % texts.length;
      badge.textContent = texts[ti];
    });

    // Ù„Ù…Ø§ ÙŠØ·Ù„Ø¹ Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ù†ÙˆÙ‚Ù Ø§Ù„ÙƒØ§Ù…
    window.addEventListener('pagehide', stopCamera);
    window.addEventListener('beforeunload', stopCamera);
  </script>
</body>
</html>
